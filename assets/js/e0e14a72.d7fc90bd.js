"use strict";(self.webpackChunkscience_island_docs=self.webpackChunkscience_island_docs||[]).push([[1408],{193:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"guides/setup-local-environment/keycloak","title":"KeyCloak (si-auth-service)","description":"Prerequisites","source":"@site/docs/03-guides/01-setup-local-environment/04-keycloak.md","sourceDirName":"03-guides/01-setup-local-environment","slug":"/guides/setup-local-environment/keycloak","permalink":"/si-docs/guides/setup-local-environment/keycloak","draft":false,"unlisted":false,"editUrl":"https://github.com/EducationNetworkGroup/si-docs/tree/main/docs/03-guides/01-setup-local-environment/04-keycloak.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Curriculum Mapper","permalink":"/si-docs/guides/setup-local-environment/curriculum-mapper"},"next":{"title":"Setting up Pulumi (si-infrastructure)","permalink":"/si-docs/guides/setup-local-environment/pulumi"}}');var t=s(4848),i=s(8453);const c={sidebar_position:3},l="KeyCloak (si-auth-service)",d={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Folder Structure",id:"folder-structure",level:2},{value:"Running the Auth Service Locally",id:"running-the-auth-service-locally",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"keycloak-si-auth-service",children:"KeyCloak (si-auth-service)"})}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop",children:"Docker"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,t.jsx)(n.p,{children:"The SI Auth Service uses Keycloak for identity management and PostgreSQL as its backend database. Docker Compose is used to run all services locally. Caddy provides HTTPS via reverse proxy, and Keycloakify is used for theming the login UI."}),"\n",(0,t.jsx)(n.h2,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"File/Folder"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"theme/"})}),(0,t.jsx)(n.td,{children:"Source code for the custom Keycloak UI theme"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"caddy/"})}),(0,t.jsx)(n.td,{children:"Configuration for reverse proxy and HTTPS"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"realms/"})}),(0,t.jsx)(n.td,{children:"JSON file defining the default Keycloak realm setup"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Dockerfile"})}),(0,t.jsx)(n.td,{children:"Builds the customized Keycloak container"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"docker-compose.yml"})}),(0,t.jsx)(n.td,{children:"Sets up the full service stack locally"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"helm/"})}),(0,t.jsx)(n.td,{children:"Kubernetes deployment using Helm charts (optional)"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"running-the-auth-service-locally",children:"Running the Auth Service Locally"}),"\n",(0,t.jsx)(n.p,{children:"Navigate to the SI Auth Service directory:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd si-auth-service-main\n"})}),"\n",(0,t.jsx)(n.p,{children:"Run Docker Compose:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker compose build --pull --no-cache\n"})}),"\n",(0,t.jsx)(n.p,{children:"Run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,t.jsx)(n.p,{children:"Once it's running, go to your web browser and type in:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-txt",children:"localhost:8443\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);