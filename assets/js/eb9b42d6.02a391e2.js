"use strict";(self.webpackChunkscience_island_docs=self.webpackChunkscience_island_docs||[]).push([[1779],{6744:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"guides/setup-local-environment/pulumi","title":"Setting up Pulumi (si-infrastructure)","description":"Pulumi lets you define reusable building blocks known as \\"component resources.\\" These are like your typical cloud resources but bundled with additional logic. If you are familiar with Terraform, these would be your modules.","source":"@site/docs/03-guides/01-setup-local-environment/05-pulumi.md","sourceDirName":"03-guides/01-setup-local-environment","slug":"/guides/setup-local-environment/pulumi","permalink":"/si-docs/guides/setup-local-environment/pulumi","draft":false,"unlisted":false,"editUrl":"https://github.com/EducationNetworkGroup/si-docs/tree/main/docs/03-guides/01-setup-local-environment/05-pulumi.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"KeyCloak (si-auth-service)","permalink":"/si-docs/guides/setup-local-environment/keycloak"},"next":{"title":"Cloud Environment","permalink":"/si-docs/category/cloud-environment"}}');var l=i(4848),t=i(8453);const r={sidebar_position:3},o="Setting up Pulumi (si-infrastructure)",a={},u=[{value:"Install",id:"install",level:3},{value:"macOS (using Homebrew)",id:"macos-using-homebrew",level:4},{value:"Linux",id:"linux",level:4},{value:"Windows",id:"windows",level:4},{value:"Config Passphrase",id:"config-passphrase",level:3},{value:"Log into Pulumi",id:"log-into-pulumi",level:3},{value:"Initialize Existing Project",id:"initialize-existing-project",level:3},{value:"Configure Your Stack",id:"configure-your-stack",level:3},{value:"Additional Commands",id:"additional-commands",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"setting-up-pulumi-si-infrastructure",children:"Setting up Pulumi (si-infrastructure)"})}),"\n",(0,l.jsx)(n.p,{children:'Pulumi lets you define reusable building blocks known as "component resources." These are like your typical cloud resources but bundled with additional logic. If you are familiar with Terraform, these would be your modules.'}),"\n",(0,l.jsx)(n.h3,{id:"install",children:"Install"}),"\n",(0,l.jsx)(n.h4,{id:"macos-using-homebrew",children:"macOS (using Homebrew)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"brew install pulumi\n"})}),"\n",(0,l.jsx)(n.h4,{id:"linux",children:"Linux"}),"\n",(0,l.jsx)(n.p,{children:"Use the install script:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl -fsSL https://get.pulumi.com | sh\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Then add Pulumi to your PATH (add this to your ",(0,l.jsx)(n.code,{children:".bashrc"})," or ",(0,l.jsx)(n.code,{children:".zshrc"}),"):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export PATH="$PATH:$HOME/.pulumi/bin"\n'})}),"\n",(0,l.jsx)(n.p,{children:"Reload your terminal:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"source ~/.bashrc\n# or\nsource ~/.zshrc\n"})}),"\n",(0,l.jsx)(n.h4,{id:"windows",children:"Windows"}),"\n",(0,l.jsxs)(n.p,{children:["Download and install Pulumi from the ",(0,l.jsx)(n.a,{href:"https://www.pulumi.com/docs/get-started/install/#windows",children:"official installer"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"config-passphrase",children:"Config Passphrase"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["You will need the ",(0,l.jsx)(n.code,{children:"PULUMI_CONFIG_PASSPHRASE"})," of the project to be able to use these commands."]})}),"\n",(0,l.jsx)(n.p,{children:"Contact your Project Manager or Team Lead for this value."}),"\n",(0,l.jsx)(n.h3,{id:"log-into-pulumi",children:"Log into Pulumi"}),"\n",(0,l.jsx)(n.p,{children:"You will need to log-in to pulumi to make changes directly, CI/CD pipelines are able to do this to deploy updates automatically:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pulumi login s3://si-iac-state/si-pulumi/\n\n# IAM module\npulumi login s3://si-iac-state/si-iam/\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"initialize-existing-project",children:"Initialize Existing Project"}),"\n",(0,l.jsx)(n.p,{children:"Navigate to your existing Pulumi project directory and initialize:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd si-infrastructure\npulumi stack select prod\n"})}),"\n",(0,l.jsx)(n.p,{children:"If the stack does not exist yet, create it:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pulumi stack init <your-stack-name>\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"configure-your-stack",children:"Configure Your Stack"}),"\n",(0,l.jsx)(n.p,{children:"Get & Set necessary configuration values (example):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"title='Can be found in Pulumi.<stack>.yaml'",children:"pulumi config get aws-region\npulumi config set someKey someValue --secret\n"})}),"\n",(0,l.jsx)(n.p,{children:"Config values can then be accessed within the code as follows:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'const config = new pulumi.Config("si-pulumi");\nconst efsList = config.getObject<string[]>("efsList");\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"additional-commands",children:"Additional Commands"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"View stack status:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pulumi stack\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"View outputs:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pulumi stack output\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Tear down stack resources:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pulumi destroy\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.p,{children:"You're now set up to manage your infrastructure using Pulumi!"}),"\n",(0,l.jsx)(n.hr,{})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(6540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);