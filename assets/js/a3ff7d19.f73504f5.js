"use strict";(self.webpackChunkscience_island_docs=self.webpackChunkscience_island_docs||[]).push([[8492],{7860:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"tools-and-technologies/github-actions-and-workflows/workflows","title":"Workflows","description":"Science Island\'s GitHub Actions Workflows.","source":"@site/docs/02-tools-and-technologies/02-github-actions-and-workflows/03-workflows.md","sourceDirName":"02-tools-and-technologies/02-github-actions-and-workflows","slug":"/tools-and-technologies/github-actions-and-workflows/workflows","permalink":"/si-docs/tools-and-technologies/github-actions-and-workflows/workflows","draft":false,"unlisted":false,"editUrl":"https://github.com/EducationNetworkGroup/si-docs/tree/main/docs/02-tools-and-technologies/02-github-actions-and-workflows/03-workflows.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"description":"Science Island\'s GitHub Actions Workflows."},"sidebar":"tutorialSidebar","previous":{"title":"CI/CD Pipeline","permalink":"/si-docs/tools-and-technologies/github-actions-and-workflows/cicd-pipeline"},"next":{"title":"Docker","permalink":"/si-docs/category/docker"}}');var l=i(4848),n=i(8453);const t={sidebar_position:3,description:"Science Island's GitHub Actions Workflows."},d="Workflows",c={},o=[{value:"Viewing Workflows in GitHub",id:"viewing-workflows-in-github",level:2},{value:"Accessing the Actions Tab",id:"accessing-the-actions-tab",level:3},{value:"Workflow Run Information",id:"workflow-run-information",level:3},{value:"Viewing Workflow Details",id:"viewing-workflow-details",level:3},{value:"Repository Workflows",id:"repository-workflows",level:2},{value:"si-infrastructure",id:"si-infrastructure",level:3},{value:"Infrastructure as Code Changes (<code>Pulumi-Up.yaml</code>)",id:"infrastructure-as-code-changes-pulumi-upyaml",level:4},{value:"Infrastructure as Code Preview (<code>Pulumi-Preview.yaml</code>)",id:"infrastructure-as-code-preview-pulumi-previewyaml",level:4},{value:"Trigger Deployment (<code>Trigger-Deployment.yaml</code>)",id:"trigger-deployment-trigger-deploymentyaml",level:4},{value:"Cancel Pulumi Lock (<code>Pulumi-Cancel.yaml</code>)",id:"cancel-pulumi-lock-pulumi-cancelyaml",level:4},{value:"Teardown Infrastructure (<code>Pulumi-Destroy.yaml</code>)",id:"teardown-infrastructure-pulumi-destroyyaml",level:4},{value:"Mapping-System-2022S2",id:"mapping-system-2022s2",level:3},{value:"Publish Container &amp; Chart to GHCR (<code>Publish.yaml</code>)",id:"publish-container--chart-to-ghcr-publishyaml",level:4},{value:"Test Builds are Successful (<code>Test-Build.yaml</code>)",id:"test-builds-are-successful-test-buildyaml",level:4},{value:"Platform",id:"platform",level:3},{value:"Publish Client Container &amp; Chart (<code>Publish-Client.yaml</code>)",id:"publish-client-container--chart-publish-clientyaml",level:4},{value:"Publish Server Container &amp; Chart (<code>Publish-Server.yaml</code>)",id:"publish-server-container--chart-publish-serveryaml",level:4},{value:"Test Builds are Successful (<code>Test-Build.yaml</code>)",id:"test-builds-are-successful-test-buildyaml-1",level:4},{value:"ScienceIslandWebsite",id:"scienceislandwebsite",level:3},{value:"Publish Container &amp; Chart to GHCR (<code>Publish.yaml</code>)",id:"publish-container--chart-to-ghcr-publishyaml-1",level:4},{value:"Publish Dev Container to GHCR (<code>Publish-Dev.yaml</code>)",id:"publish-dev-container-to-ghcr-publish-devyaml",level:4},{value:"si-auth-service",id:"si-auth-service",level:3},{value:"Publish Container &amp; Chart to GHCR (<code>Publish.yaml</code>)",id:"publish-container--chart-to-ghcr-publishyaml-2",level:4},{value:"Verify PR - Build Image &amp; Validate Helm (<code>Verify.yaml</code>)",id:"verify-pr---build-image--validate-helm-verifyyaml",level:4}];function h(e){const s={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"workflows",children:"Workflows"})}),"\n",(0,l.jsx)(s.p,{children:"This guide provides an overview of all GitHub Actions workflows used across Science Island repositories, including how to view and monitor them."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"viewing-workflows-in-github",children:"Viewing Workflows in GitHub"}),"\n",(0,l.jsx)(s.p,{children:"GitHub Actions workflows can be monitored directly in each repository's interface."}),"\n",(0,l.jsx)(s.h3,{id:"accessing-the-actions-tab",children:"Accessing the Actions Tab"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Navigate to a repository on GitHub (e.g., ",(0,l.jsx)(s.code,{children:"si-infrastructure"}),", ",(0,l.jsx)(s.code,{children:"Platform"}),")"]}),"\n",(0,l.jsxs)(s.li,{children:["Click the ",(0,l.jsx)(s.em,{children:"Actions"})," tab in the top navigation bar"]}),"\n",(0,l.jsx)(s.li,{children:"You'll see a list of workflow runs, with the most recent at the top"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"workflow-run-information",children:"Workflow Run Information"}),"\n",(0,l.jsx)(s.p,{children:"Each workflow run displays:"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Information"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Status"})}),(0,l.jsx)(s.td,{children:"Success (green checkmark), failure (red X), or in progress (yellow circle)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Workflow name"})}),(0,l.jsx)(s.td,{children:"The name defined in the workflow YAML file."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Trigger event"})}),(0,l.jsx)(s.td,{children:"What caused the workflow to run (push, pull request, manual dispatch)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Branch/tag"})}),(0,l.jsx)(s.td,{children:"Which branch or tag triggered the workflow."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Duration"})}),(0,l.jsx)(s.td,{children:"How long the workflow took to complete."})]})]})]}),"\n",(0,l.jsx)(s.h3,{id:"viewing-workflow-details",children:"Viewing Workflow Details"}),"\n",(0,l.jsx)(s.p,{children:"Click on any workflow run to see:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Individual job statuses"}),"\n",(0,l.jsx)(s.li,{children:"Step-by-step execution logs"}),"\n",(0,l.jsx)(s.li,{children:"Artifacts produced by the workflow"}),"\n",(0,l.jsx)(s.li,{children:"Error messages (if the workflow failed)"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"repository-workflows",children:"Repository Workflows"}),"\n",(0,l.jsx)(s.p,{children:"The following table provides an overview of workflows across all Science Island repositories:"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Repository"}),(0,l.jsx)(s.th,{children:"Workflow"}),(0,l.jsx)(s.th,{children:"Trigger"}),(0,l.jsx)(s.th,{children:"Purpose"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-infrastructure"})}),(0,l.jsx)(s.td,{children:"Pulumi-Up.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsx)(s.td,{children:"Apply infrastructure changes to GCP."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-infrastructure"})}),(0,l.jsx)(s.td,{children:"Pulumi-Preview.yaml"}),(0,l.jsx)(s.td,{children:"Pull requests"}),(0,l.jsx)(s.td,{children:"Preview infrastructure changes."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-infrastructure"})}),(0,l.jsx)(s.td,{children:"Trigger-Deployment.yaml"}),(0,l.jsx)(s.td,{children:"Repository dispatch"}),(0,l.jsx)(s.td,{children:"Update deployed versions."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-infrastructure"})}),(0,l.jsx)(s.td,{children:"Pulumi-Cancel.yaml"}),(0,l.jsx)(s.td,{children:"Manual dispatch"}),(0,l.jsx)(s.td,{children:"Cancel Pulumi state locks."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-infrastructure"})}),(0,l.jsx)(s.td,{children:"Pulumi-Destroy.yaml"}),(0,l.jsx)(s.td,{children:"Manual dispatch"}),(0,l.jsx)(s.td,{children:"Teardown infrastructure."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Mapping-System-2022S2"})}),(0,l.jsx)(s.td,{children:"Publish.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsxs)(s.td,{children:["Publish frontend and backend. ",(0,l.jsx)(s.em,{children:"Trigger Deployment does not work."})]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Mapping-System-2022S2"})}),(0,l.jsx)(s.td,{children:"Test-Build.yaml"}),(0,l.jsx)(s.td,{children:"Pull requests"}),(0,l.jsx)(s.td,{children:"Validate builds."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Platform"})}),(0,l.jsx)(s.td,{children:"Publish-Client.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsx)(s.td,{children:"Publish frontend."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Platform"})}),(0,l.jsx)(s.td,{children:"Publish-Server.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsx)(s.td,{children:"Publish backend."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"Platform"})}),(0,l.jsx)(s.td,{children:"Test-Build.yaml"}),(0,l.jsx)(s.td,{children:"Pull requests"}),(0,l.jsx)(s.td,{children:"Validate builds."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"ScienceIslandWebsite"})}),(0,l.jsx)(s.td,{children:"Publish.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsx)(s.td,{children:"Publish website."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"ScienceIslandWebsite"})}),(0,l.jsx)(s.td,{children:"Publish-Dev.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsx)(s.td,{children:"Publish dev version of website."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-auth-service"})}),(0,l.jsx)(s.td,{children:"Publish.yaml"}),(0,l.jsxs)(s.td,{children:["Push to ",(0,l.jsx)(s.code,{children:"main"})]}),(0,l.jsxs)(s.td,{children:["Publish Keycloak. ",(0,l.jsx)(s.em,{children:"Trigger Deployment does not work."})]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"si-auth-service"})}),(0,l.jsx)(s.td,{children:"Verify.yaml"}),(0,l.jsx)(s.td,{children:"Pull requests"}),(0,l.jsx)(s.td,{children:"Validate build and Helm."})]})]})]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"si-infrastructure",children:"si-infrastructure"}),"\n",(0,l.jsxs)(s.h4,{id:"infrastructure-as-code-changes-pulumi-upyaml",children:["Infrastructure as Code Changes (",(0,l.jsx)(s.code,{children:"Pulumi-Up.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch"]}),"\n",(0,l.jsx)(s.p,{children:"Applies infrastructure changes to Google Cloud Platform using Pulumi. Runs in two phases to handle resource dependencies:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Phase 1"}),": Updates compute, storage, and IAM resources"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Phase 2"}),": Updates DNS configuration"]}),"\n"]}),"\n",(0,l.jsxs)(s.h4,{id:"infrastructure-as-code-preview-pulumi-previewyaml",children:["Infrastructure as Code Preview (",(0,l.jsx)(s.code,{children:"Pulumi-Preview.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Pull requests that modify infrastructure code"]}),"\n",(0,l.jsx)(s.p,{children:"Generates a preview of infrastructure changes without applying them. Runs for all Pulumi projects (compute, dns, storage, iam) and posts the preview as a comment on the PR."}),"\n",(0,l.jsxs)(s.h4,{id:"trigger-deployment-trigger-deploymentyaml",children:["Trigger Deployment (",(0,l.jsx)(s.code,{children:"Trigger-Deployment.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Repository dispatch event from application repositories"]}),"\n",(0,l.jsxs)(s.p,{children:["Listens for deployment events from application repositories. When triggered, it updates chart versions and image tags in ",(0,l.jsx)(s.code,{children:"Pulumi.prod.yaml"})," and commits the changes to trigger infrastructure updates."]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["Note: This workflow currently ",(0,l.jsx)(s.strong,{children:"does not receive events"})," from ",(0,l.jsx)(s.code,{children:"Mapping-System-2022S2"})," and ",(0,l.jsx)(s.code,{children:"si-auth-service"}),". For those repositories, ",(0,l.jsx)(s.code,{children:"Pulumi.prod.yaml"})," must be updated manually. The workflow functions correctly for ",(0,l.jsx)(s.code,{children:"Platform"})," and ",(0,l.jsx)(s.code,{children:"ScienceIslandWebsite"})," repositories."]}),"\n"]}),"\n",(0,l.jsxs)(s.h4,{id:"cancel-pulumi-lock-pulumi-cancelyaml",children:["Cancel Pulumi Lock (",(0,l.jsx)(s.code,{children:"Pulumi-Cancel.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Manual workflow dispatch"]}),"\n",(0,l.jsx)(s.p,{children:"Cancels active Pulumi state locks for selected projects. Used when workflows fail and leave locks behind. Supports canceling locks for individual projects or all projects at once."}),"\n",(0,l.jsxs)(s.h4,{id:"teardown-infrastructure-pulumi-destroyyaml",children:["Teardown Infrastructure (",(0,l.jsx)(s.code,{children:"Pulumi-Destroy.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Manual workflow dispatch"]}),"\n",(0,l.jsx)(s.p,{children:"Destroys all infrastructure resources. This is a destructive operation and should only be used when tearing down the entire environment."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"mapping-system-2022s2",children:"Mapping-System-2022S2"}),"\n",(0,l.jsxs)(s.h4,{id:"publish-container--chart-to-ghcr-publishyaml",children:["Publish Container & Chart to GHCR (",(0,l.jsx)(s.code,{children:"Publish.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch"]}),"\n",(0,l.jsxs)(s.p,{children:["Builds and publishes both frontend and backend Docker images to GHCR, publishes Helm charts for both components (legacy - not used for deployment), and triggers the deployment workflow in ",(0,l.jsx)(s.code,{children:"si-infrastructure"}),"."]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["Note: The Trigger Deployment step in this workflow ",(0,l.jsx)(s.strong,{children:"does not currently work"}),". After merging and tagging, you must manually update the version in ",(0,l.jsx)(s.code,{children:"Pulumi.prod.yaml"})," in the ",(0,l.jsx)(s.code,{children:"si-infrastructure"})," repository."]}),"\n"]}),"\n",(0,l.jsxs)(s.h4,{id:"test-builds-are-successful-test-buildyaml",children:["Test Builds are Successful (",(0,l.jsx)(s.code,{children:"Test-Build.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Pull requests"]}),"\n",(0,l.jsx)(s.p,{children:"Validates that frontend and backend images build successfully. Used to catch build issues before merging PRs."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"platform",children:"Platform"}),"\n",(0,l.jsxs)(s.h4,{id:"publish-client-container--chart-publish-clientyaml",children:["Publish Client Container & Chart (",(0,l.jsx)(s.code,{children:"Publish-Client.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch (paths: ",(0,l.jsx)(s.code,{children:"client/**/*"}),", ",(0,l.jsx)(s.code,{children:"helm/si-platform-frontend/**/*"}),", ",(0,l.jsx)(s.code,{children:".github/workflows/Publish-Client.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:["Builds and publishes the frontend image to GHCR, publishes the frontend Helm chart (legacy - not used for deployment), and triggers the deployment workflow in ",(0,l.jsx)(s.code,{children:"si-infrastructure"}),"."]}),"\n",(0,l.jsxs)(s.h4,{id:"publish-server-container--chart-publish-serveryaml",children:["Publish Server Container & Chart (",(0,l.jsx)(s.code,{children:"Publish-Server.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch (paths: ",(0,l.jsx)(s.code,{children:"server/**/*"}),", ",(0,l.jsx)(s.code,{children:"helm/si-platform-backend/**/*"}),", ",(0,l.jsx)(s.code,{children:"helm/backend-service-template/**/*"}),", ",(0,l.jsx)(s.code,{children:".github/workflows/Publish-Server.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:["Builds and publishes the backend image to GHCR, publishes the backend Helm chart (legacy - not used for deployment), and triggers the deployment workflow in ",(0,l.jsx)(s.code,{children:"si-infrastructure"}),"."]}),"\n",(0,l.jsxs)(s.h4,{id:"test-builds-are-successful-test-buildyaml-1",children:["Test Builds are Successful (",(0,l.jsx)(s.code,{children:"Test-Build.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Pull requests"]}),"\n",(0,l.jsx)(s.p,{children:"Validates that frontend and backend images build successfully. Used to catch build issues before merging PRs."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"scienceislandwebsite",children:"ScienceIslandWebsite"}),"\n",(0,l.jsxs)(s.h4,{id:"publish-container--chart-to-ghcr-publishyaml-1",children:["Publish Container & Chart to GHCR (",(0,l.jsx)(s.code,{children:"Publish.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch"]}),"\n",(0,l.jsxs)(s.p,{children:["Builds and publishes the website image to GHCR, publishes the Helm chart (legacy - not used for deployment), and triggers the deployment workflow in ",(0,l.jsx)(s.code,{children:"si-infrastructure"}),"."]}),"\n",(0,l.jsxs)(s.h4,{id:"publish-dev-container-to-ghcr-publish-devyaml",children:["Publish Dev Container to GHCR (",(0,l.jsx)(s.code,{children:"Publish-Dev.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch"]}),"\n",(0,l.jsxs)(s.p,{children:["Creates a development version of the website image with the tag ",(0,l.jsx)(s.code,{children:"dev"}),". This image includes ",(0,l.jsx)(s.code,{children:"local.env"})," values instead of ",(0,l.jsx)(s.code,{children:"production.env"})," values, making it useful for local development when connecting to a local Keycloak deployment."]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"si-auth-service",children:"si-auth-service"}),"\n",(0,l.jsxs)(s.h4,{id:"publish-container--chart-to-ghcr-publishyaml-2",children:["Publish Container & Chart to GHCR (",(0,l.jsx)(s.code,{children:"Publish.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Push to ",(0,l.jsx)(s.code,{children:"main"})," branch"]}),"\n",(0,l.jsxs)(s.p,{children:["Builds and publishes the Keycloak image to GHCR, publishes the Keycloak Helm chart (legacy - not used for deployment), and triggers the deployment workflow in ",(0,l.jsx)(s.code,{children:"si-infrastructure"}),"."]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["Note: The Trigger Deployment step in this workflow ",(0,l.jsx)(s.strong,{children:"does not currently work"}),". After merging and tagging, you must manually update the version in ",(0,l.jsx)(s.code,{children:"Pulumi.prod.yaml"})," in the ",(0,l.jsx)(s.code,{children:"si-infrastructure"})," repository."]}),"\n"]}),"\n",(0,l.jsxs)(s.h4,{id:"verify-pr---build-image--validate-helm-verifyyaml",children:["Verify PR - Build Image & Validate Helm (",(0,l.jsx)(s.code,{children:"Verify.yaml"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Trigger"}),": Pull requests"]}),"\n",(0,l.jsx)(s.p,{children:"Builds the Keycloak image and validates the Helm chart configuration (legacy validation). Used to ensure PRs will build successfully and have valid configurations before merging."})]})}function a(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>d});var r=i(6540);const l={},n=r.createContext(l);function t(e){const s=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(n.Provider,{value:s},e.children)}}}]);