"use strict";(self.webpackChunkscience_island_docs=self.webpackChunkscience_island_docs||[]).push([[7553],{6114:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"guides/repositories/keycloak","title":"KeyCloak (si-auth-service)","description":"Understand and deploy the si-auth-service repository.","source":"@site/docs/03-guides/01-repositories/04-keycloak.md","sourceDirName":"03-guides/01-repositories","slug":"/guides/repositories/keycloak","permalink":"/si-docs/guides/repositories/keycloak","draft":false,"unlisted":false,"editUrl":"https://github.com/EducationNetworkGroup/si-docs/tree/main/docs/03-guides/01-repositories/04-keycloak.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"description":"Understand and deploy the si-auth-service repository."},"sidebar":"tutorialSidebar","previous":{"title":"Curriculum Mapper (Mapping-System-2022S2)","permalink":"/si-docs/guides/repositories/curriculum-mapper"},"next":{"title":"Setting up Pulumi (si-infrastructure)","permalink":"/si-docs/guides/repositories/pulumi"}}');var t=r(4848),n=r(8453);const d={sidebar_position:3,description:"Understand and deploy the si-auth-service repository."},o="KeyCloak (si-auth-service)",c={},l=[{value:"Folder Structure",id:"folder-structure",level:2},{value:"Local Deployment Guide",id:"local-deployment-guide",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Build &amp; Run",id:"build--run",level:3}];function a(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"keycloak-si-auth-service",children:"KeyCloak (si-auth-service)"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"si-auth-service"})," repository uses Keycloak for identity management and PostgreSQL as its backend database. Docker Compose is used to run all services locally. Caddy provides HTTPS via reverse proxy, and Keycloakify is used for theming the login UI."]}),"\n",(0,t.jsx)(s.h2,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"File/Folder"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"theme/"})}),(0,t.jsx)(s.td,{children:"Source code for the custom Keycloak UI theme"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"caddy/"})}),(0,t.jsx)(s.td,{children:"Configuration for reverse proxy and HTTPS"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"realms/"})}),(0,t.jsx)(s.td,{children:"JSON file defining the default Keycloak realm setup"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"Dockerfile"})}),(0,t.jsx)(s.td,{children:"Builds the customized Keycloak container"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"docker-compose.yml"})}),(0,t.jsx)(s.td,{children:"Sets up the full service stack locally"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"helm/"})}),(0,t.jsx)(s.td,{children:"Kubernetes deployment using Helm charts"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"local-deployment-guide",children:"Local Deployment Guide"}),"\n",(0,t.jsx)(s.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/si-docs/tools-and-technologies/docker/the-basics",children:"Docker"})}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"build--run",children:"Build & Run"}),"\n",(0,t.jsx)(s.p,{children:"To build and run the service locally, run the following command."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"docker compose up -d --build\n"})}),"\n",(0,t.jsxs)(s.p,{children:["You can then access the deployment at ",(0,t.jsx)(s.a,{href:"http://localhost",children:"http://localhost"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Note that ",(0,t.jsx)(s.em,{children:"you may need to wait a couple of minutes"})," after running the command before the images are set up and you can access the service."]}),"\n",(0,t.jsxs)(s.p,{children:["You can watch the logs for the ",(0,t.jsx)(s.code,{children:"keycloak"})," container until you see the log for ",(0,t.jsx)(s.code,{children:"Installed features:..."}),". Once you see that, everything should be ready and working."]})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>d,x:()=>o});var i=r(6540);const t={},n=i.createContext(t);function d(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);