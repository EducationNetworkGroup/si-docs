<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tools-and-technologies/github-actions-and-workflows/cicd-pipeline" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">CI/CD Pipeline | Science Island</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://educationnetworkgroup.github.io/si-docs/img/science-island-social-card.png"><meta data-rh="true" name="twitter:image" content="https://educationnetworkgroup.github.io/si-docs/img/science-island-social-card.png"><meta data-rh="true" property="og:url" content="https://educationnetworkgroup.github.io/si-docs/tools-and-technologies/github-actions-and-workflows/cicd-pipeline"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CI/CD Pipeline | Science Island"><meta data-rh="true" name="description" content="Understanding Science Island&#x27;s CI/CD Pipeline."><meta data-rh="true" property="og:description" content="Understanding Science Island&#x27;s CI/CD Pipeline."><link data-rh="true" rel="icon" href="/si-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://educationnetworkgroup.github.io/si-docs/tools-and-technologies/github-actions-and-workflows/cicd-pipeline"><link data-rh="true" rel="alternate" href="https://educationnetworkgroup.github.io/si-docs/tools-and-technologies/github-actions-and-workflows/cicd-pipeline" hreflang="en"><link data-rh="true" rel="alternate" href="https://educationnetworkgroup.github.io/si-docs/tools-and-technologies/github-actions-and-workflows/cicd-pipeline" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/si-docs/blog/rss.xml" title="Science Island RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/si-docs/blog/atom.xml" title="Science Island Atom Feed"><link rel="stylesheet" href="/si-docs/assets/css/styles.9e787055.css">
<script src="/si-docs/assets/js/runtime~main.51d5a528.js" defer="defer"></script>
<script src="/si-docs/assets/js/main.946a6565.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/si-docs/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/si-docs/"><div class="navbar__logo"><img src="/si-docs/img/logo.png" alt="Science Island Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/si-docs/img/logo.png" alt="Science Island Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Science Island</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/si-docs/">Docs</a><a class="navbar__item navbar__link" href="/si-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/EducationNetworkGroup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/si-docs/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/si-docs/category/tools-and-technologies">Tools and Technologies</a><button aria-label="Collapse sidebar category &#x27;Tools and Technologies&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/si-docs/category/github-actions--workflows">GitHub Actions &amp; Workflows</a><button aria-label="Collapse sidebar category &#x27;GitHub Actions &amp; Workflows&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/si-docs/tools-and-technologies/github-actions-and-workflows/the-basics">The Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/si-docs/tools-and-technologies/github-actions-and-workflows/cicd-pipeline">CI/CD Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/si-docs/tools-and-technologies/github-actions-and-workflows/workflows">Workflows</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/si-docs/category/docker">Docker</a><button aria-label="Expand sidebar category &#x27;Docker&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/si-docs/category/caddy">Caddy</a><button aria-label="Expand sidebar category &#x27;Caddy&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/si-docs/category/keycloak">Keycloak</a><button aria-label="Expand sidebar category &#x27;Keycloak&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/si-docs/category/guides">Guides</a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/si-docs/category/project-management">Project Management</a><button aria-label="Expand sidebar category &#x27;Project Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/si-docs/category/archive">Archive</a><button aria-label="Expand sidebar category &#x27;Archive&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/si-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/si-docs/category/tools-and-technologies"><span itemprop="name">Tools and Technologies</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/si-docs/category/github-actions--workflows"><span itemprop="name">GitHub Actions &amp; Workflows</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CI/CD Pipeline</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CI/CD Pipeline</h1></header>
<p>This guide explains Science Island&#x27;s continuous integration and continuous deployment (CI/CD) pipeline, including the intended workflow for developers and how the automated deployment system operates.</p>
<blockquote>
<p>Note: Science Island migrated from AWS with Kubernetes to a simplified GCP VM-based deployment in 2025. Helm charts are still published to GHCR (legacy from the Kubernetes era) but are no longer used for deployment. Services now run on virtual machines using Docker Compose instead of Kubernetes orchestration.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intended-workflow">Intended Workflow<a href="#intended-workflow" class="hash-link" aria-label="Direct link to Intended Workflow" title="Direct link to Intended Workflow">​</a></h2>
<p>When working on Science Island projects, follow this workflow to ensure smooth deployments:</p>
<ol>
<li><strong>Create a branch</strong> - Make a new branch from <code>main</code> to do your work in.</li>
<li><strong>Submit a Pull Request (PR)</strong> - When your work is complete, create a PR to merge your changes back into <code>main</code>.</li>
<li><strong>Resolve build issues</strong> - Some repositories have workflows that validate PR builds. Ensure all build checks pass before merging.</li>
<li><strong>Merge the PR</strong> - Once approved and passing all checks, merge your PR into the <code>main</code> branch.</li>
<li><strong>Create a new tag</strong> - After merging, create a new tag for the repository. See <a href="#creating-a-git-tag">Creating a Git Tag</a> below.</li>
<li><strong>Manual updates (temporary workaround)</strong> - For repositories where the Trigger Deployment step doesn&#x27;t currently work (see <a href="#repositories-requiring-manual-updates">Repositories Requiring Manual Updates</a>), manually update the version tag in <code>Pulumi.prod.yaml</code>. When you commit and push this change, it will automatically trigger the <code>Pulumi-Up.yaml</code> workflow, allowing you to <em>skip Step 7</em>.</li>
<li><strong>Push empty commit (temporary workaround)</strong> - <code>Trigger-Deployment.yaml</code> doesn&#x27;t currently trigger <code>Pulumi-Up.yaml</code> automatically. See <a href="#creating-an-empty-commit">Creating an Empty Commit</a> below.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-git-tag">Creating a Git Tag<a href="#creating-a-git-tag" class="hash-link" aria-label="Direct link to Creating a Git Tag" title="Direct link to Creating a Git Tag">​</a></h3>
<p>Tags are essential for triggering deployments. Without an updated tag, the deployment will fail even if the code is merged. To create and push a new tag:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Create a new tag (use semantic versioning: v1.2.3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git tag v1.2.3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Push all tags to the remote repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git push --tags</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="repositories-requiring-manual-updates">Repositories Requiring Manual Updates<a href="#repositories-requiring-manual-updates" class="hash-link" aria-label="Direct link to Repositories Requiring Manual Updates" title="Direct link to Repositories Requiring Manual Updates">​</a></h3>
<p>The <code>Mapping-System-2022S2</code> and <code>si-auth-service</code> repositories have Trigger Deployment steps that <em>do not currently work</em>. After merging and tagging in these repositories, you must manually update <code>Pulumi.prod.yaml</code> in the <code>si-infrastructure</code> repository:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">gcp-compute:deployed-versions.si-auth-service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1.1.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">gcp-compute:deployed-versions.si-auth-service.image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v0.0.6                 </span><span class="token comment" style="color:rgb(98, 114, 164)">#&lt;---- Update to your new git tag for si-auth-service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">gcp-compute:deployed-versions.si-curriculum-mapper-backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">gcp-compute:deployed-versions.si-curriculum-mapper-backend.image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v0.0.1    </span><span class="token comment" style="color:rgb(98, 114, 164)">#&lt;---- Update to your new git tag for Mapping-System-2022S2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">gcp-compute:deployed-versions.si-curriculum-mapper-frontend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">gcp-compute:deployed-versions.si-curriculum-mapper-frontend.image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v0.0.1   </span><span class="token comment" style="color:rgb(98, 114, 164)">#&lt;---- Update to your new git tag for Mapping-System-2022S2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For all other repositories (e.g., <code>ScienceIslandWebsite</code>, <code>Platform</code>), the Trigger Deployment step functions correctly and will automatically trigger <code>Trigger-Deployment.yaml</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-empty-commit">Creating an Empty Commit<a href="#creating-an-empty-commit" class="hash-link" aria-label="Direct link to Creating an Empty Commit" title="Direct link to Creating an Empty Commit">​</a></h3>
<p>An empty commit can be used to trigger workflows without making actual code changes. This is currently needed to manually trigger the <code>Pulumi-Up.yaml</code> workflow in the <code>si-infrastructure</code> repository:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Create an empty commit with a message</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git commit --allow-empty -m &quot;Trigger deployment&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Push the commit to the remote repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git push origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-the-pipeline-works">How the Pipeline Works<a href="#how-the-pipeline-works" class="hash-link" aria-label="Direct link to How the Pipeline Works" title="Direct link to How the Pipeline Works">​</a></h2>
<p>Science Island&#x27;s CI/CD pipeline automates the entire deployment process from code commit to production deployment. The pipeline follows this sequence:</p>
<table><thead><tr><th>Step</th><th>Component</th><th>Description</th></tr></thead><tbody><tr><td><code>1</code></td><td>Publish workflows</td><td>Builds and publishes Docker images and Helm charts to GHCR from application repositories.</td></tr><tr><td><code>2</code></td><td>Trigger Deployment event</td><td>Sends deployment event from application repositories to <code>si-infrastructure</code>.</td></tr><tr><td><code>3</code></td><td>Update deployed versions</td><td>Updates <code>Pulumi.prod.yaml</code> with new chart versions and image tags in <code>si-infrastructure</code>.</td></tr><tr><td><code>4</code></td><td>Infrastructure updates</td><td>Applies changes to GCP resources and redeploys services on virtual machines.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-publish-workflows">1. Publish Workflows<a href="#1-publish-workflows" class="hash-link" aria-label="Direct link to 1. Publish Workflows" title="Direct link to 1. Publish Workflows">​</a></h3>
<p>When code is pushed to the <code>main</code> branch of an application repository (e.g., <code>ScienceIslandWebsite</code>, <code>Platform</code>), a publish workflow automatically:</p>
<ul>
<li>Builds a Docker container image</li>
<li>Publishes the image to GitHub Container Registry (GHCR)</li>
<li>Publishes a Helm chart to GHCR (legacy - not used for deployment)</li>
<li>Triggers a deployment event</li>
</ul>
<p>Each application repository has its own publish workflow (e.g., <code>Publish-Server.yaml</code>, <code>Publish-Client.yaml</code>, <code>Publish.yaml</code>).</p>
<blockquote>
<p>Note: While Helm charts are still published, they are no longer used in the deployment process. Services are deployed using Docker Compose on virtual machines.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-trigger-deployment">2. Trigger Deployment<a href="#2-trigger-deployment" class="hash-link" aria-label="Direct link to 2. Trigger Deployment" title="Direct link to 2. Trigger Deployment">​</a></h3>
<p>At the end of each publish workflow, a <code>Trigger Deployment</code> event is created and sent to the <code>si-infrastructure</code> repository with the following information:</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td><code>chart</code></td><td>The name of the service/application (e.g., <code>si-platform-frontend</code>). Legacy naming from Kubernetes era.</td></tr><tr><td><code>version</code></td><td>The version number (e.g., <code>1.2.3</code>).</td></tr><tr><td><code>image</code></td><td>The image tag to deploy (e.g., <code>main</code>).</td></tr></tbody></table>
<blockquote>
<p>Note: The term &quot;chart&quot; is legacy terminology from when Kubernetes/Helm was used. It now simply refers to the service name for tracking deployment versions.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-update-deployed-versions">3. Update Deployed Versions<a href="#3-update-deployed-versions" class="hash-link" aria-label="Direct link to 3. Update Deployed Versions" title="Direct link to 3. Update Deployed Versions">​</a></h3>
<p>The <code>Trigger-Deployment.yaml</code> workflow in <code>si-infrastructure</code> listens for the Trigger Deployment event. When triggered, it:</p>
<ul>
<li>Pulls the latest changes from the <code>si-infrastructure</code> repository</li>
<li>Updates the service versions and image tags in <code>Pulumi.prod.yaml</code> (located in the root of <code>si-infrastructure</code>)</li>
<li>Commits and pushes these changes to the <code>main</code> branch</li>
</ul>
<blockquote>
<p>Note: The configuration file tracks &quot;chart&quot; versions as a legacy naming convention. These values control which Docker image versions are deployed via Docker Compose. For repositories where the Trigger Deployment step doesn&#x27;t work (<code>Mapping-System-2022S2</code>, <code>si-auth-service</code>), this file must be updated manually.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-infrastructure-updates">4. Infrastructure Updates<a href="#4-infrastructure-updates" class="hash-link" aria-label="Direct link to 4. Infrastructure Updates" title="Direct link to 4. Infrastructure Updates">​</a></h3>
<p>The <code>Pulumi-Up.yaml</code> workflow in <code>si-infrastructure</code> listens for commits to the <code>main</code> branch. When it detects changes to the Pulumi configuration file, it:</p>
<ul>
<li>Updates GCP resources (compute, storage, IAM)</li>
<li>Updates DNS configuration</li>
<li>Re-deploys any service with an updated version or image tag on the virtual machines using Docker Compose</li>
</ul>
<p>The Pulumi workflow runs in two phases to ensure dependencies are created in the correct order:</p>
<table><thead><tr><th>Phase</th><th>Projects</th><th>Description</th></tr></thead><tbody><tr><td><code>Phase 1</code></td><td>compute, storage, iam</td><td>Creates and updates core infrastructure resources.</td></tr><tr><td><code>Phase 2</code></td><td>dns</td><td>Updates DNS configuration. Depends on Phase 1 resources.</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cancel-pulumi-lock">Cancel Pulumi Lock<a href="#cancel-pulumi-lock" class="hash-link" aria-label="Direct link to Cancel Pulumi Lock" title="Direct link to Cancel Pulumi Lock">​</a></h2>
<p>When working with Pulumi for infrastructure as code, state files can become locked if a workflow is interrupted or fails unexpectedly. The <code>Pulumi-Cancel.yaml</code> workflow provides a manual way to release these locks.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use">When to Use<a href="#when-to-use" class="hash-link" aria-label="Direct link to When to Use" title="Direct link to When to Use">​</a></h3>
<p>Use this workflow when:</p>
<ul>
<li>A Pulumi workflow fails mid-execution and leaves a lock</li>
<li>You need to cancel a long-running Pulumi operation</li>
<li>Multiple workflows conflict and create a deadlock</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-run">How to Run<a href="#how-to-run" class="hash-link" aria-label="Direct link to How to Run" title="Direct link to How to Run">​</a></h3>
<p>The <code>Pulumi-Cancel.yaml</code> workflow is triggered manually via workflow dispatch:</p>
<ol>
<li>Navigate to the Actions tab in the <code>si-infrastructure</code> repository</li>
<li>Select the &quot;Cancel Pulumi Lock&quot; workflow</li>
<li>Click &quot;Run workflow&quot;</li>
<li>Choose which project to cancel the lock for</li>
</ol>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>compute</code></td><td>Compute resources (VMs, deployments).</td></tr><tr><td><code>storage</code></td><td>Storage buckets and volumes.</td></tr><tr><td><code>iam</code></td><td>Service accounts and permissions.</td></tr><tr><td><code>dns</code></td><td>DNS records and routing.</td></tr><tr><td><code>all</code></td><td>Cancel locks for all projects.</td></tr></tbody></table>
<p>The workflow will connect to the Pulumi state backend and cancel any active locks for the selected project(s).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/EducationNetworkGroup/si-docs/tree/main/docs/02-tools-and-technologies/02-github-actions-and-workflows/02-cicd-pipeline.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/si-docs/tools-and-technologies/github-actions-and-workflows/the-basics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">The Basics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/si-docs/tools-and-technologies/github-actions-and-workflows/workflows"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Workflows</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intended-workflow" class="table-of-contents__link toc-highlight">Intended Workflow</a><ul><li><a href="#creating-a-git-tag" class="table-of-contents__link toc-highlight">Creating a Git Tag</a></li><li><a href="#repositories-requiring-manual-updates" class="table-of-contents__link toc-highlight">Repositories Requiring Manual Updates</a></li><li><a href="#creating-an-empty-commit" class="table-of-contents__link toc-highlight">Creating an Empty Commit</a></li></ul></li><li><a href="#how-the-pipeline-works" class="table-of-contents__link toc-highlight">How the Pipeline Works</a><ul><li><a href="#1-publish-workflows" class="table-of-contents__link toc-highlight">1. Publish Workflows</a></li><li><a href="#2-trigger-deployment" class="table-of-contents__link toc-highlight">2. Trigger Deployment</a></li><li><a href="#3-update-deployed-versions" class="table-of-contents__link toc-highlight">3. Update Deployed Versions</a></li><li><a href="#4-infrastructure-updates" class="table-of-contents__link toc-highlight">4. Infrastructure Updates</a></li></ul></li><li><a href="#cancel-pulumi-lock" class="table-of-contents__link toc-highlight">Cancel Pulumi Lock</a><ul><li><a href="#when-to-use" class="table-of-contents__link toc-highlight">When to Use</a></li><li><a href="#how-to-run" class="table-of-contents__link toc-highlight">How to Run</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Site Map</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/si-docs/">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/si-docs/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tools &amp; Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/EducationNetworkGroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://login.scienceisland.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">KeyCloak<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Deployed</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://scienceisland.com/#/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://scienceisland.com/main.php#/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Game<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://platform.scienceisland.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Teacher&#x27;s Portal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://mapper.scienceisland.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item">Curriculum Mapper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Education Network Group.</div></div></div></footer></div>
</body>
</html>